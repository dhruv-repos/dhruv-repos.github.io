---
layout : default
title : S3
---
# Amazon Simple Storage Service S3
S3 is an object storage service that offers scalability, data avaliability ,security and performance. Also provides management features to optimize ,organize and configure data as needed.
 
## Storage classes 
- S3 standard : General purpose , frequently accesses data 
- S3 intelligent tiering : Automatically moves data to most cost effective access tier based on access frequency. Incurs monthly fees for object monitoring and automation
- S3 Express One Zone - single-Availability Zone storage class purpose-built to deliver consistent single-digit millisecond data access for your most frequently accessed data and latency-sensitive applications
- S3 Standard IA / One-zone - Infrequent access with one zone speed or not
- S3 Glacier [instant/flexible retrieval/ deep archive] - rarely required data for archiving and record keeping purpose
For instant and flexible the minimum storage duration is **90 days** and for deep archive it is **180 days**

## Archive Retrieval Options 
1. **Expedited** : Quick access of data for urgent requests. Glacier Flexible retreival and Intelli tier archive access, within 1-5 mins
2. **Standard** : Access archived object within several hours, can take upto 12 hr for deep archive
3. **Bulk** : Low cost data retrieval for large amounts of data even petabytes.Can range from 5-48 hours 

## Object Overview 
*Object is a file and any metadata that describes the file*
*Bucket is the container for objects*
> Types of buckets:
> 1. General Purpose buckets 
> 2. Directory Buckets : uses the S3 Express One zone storage class

## General Purpose vs Directory Bucket
|General Purpose|Directory Bucket|
|---------------|----------------|
|Flat data|Heirarchial Data      |
- KEY : name assigned to an object
- Version ID :  The version ID is a string that Amazon S3 generates when you add an object to a bucket. <br>
    -  *Also read :  [Versioning_in_S3](https://docs.aws.amazon.com/AmazonS3/latest/userguide/versioning-workflows.html)*
- Value : The content stored in S3
- Metadata : A set of name-value pairs with which you can store info regarding the object
- Subresources : "acl" => contains a list of grants indetifying the grantee and the permissions granted

## Versioning in S3
Use S3 Versioning to keep multiple versions of an object in one bucket so that you can restore objects that are accidentally deleted or overwritten.

- If you delete an object, instead of removing the object permanently, Amazon S3 inserts a delete marker, which becomes the current object version. You can then restore the previous version
- Inorder to permanently delete , always mention the VERSION ID with Delete command

## Pre-signed URLs
You can use presigned URLs to grant time-limited access to objects in Amazon S3 without updating your bucket policy.<br>
The credentials used by the presigned URL are those of the AWS user who generated the URL.

>  Read :[Who can create presigned URL](https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-presigned-url.html#who-presigned-url)

## Lifecycle of Objects
S3 Lifecycle helps you store objects cost effectively throughout their lifecycle by transitioning them to lower-cost storage classes, or, deleting expired objects on your behalf.

There are 2 types of actions :
1. Transition Actions :  define when objects transition to another storage class.
2. Expiration Actions : define when objects expire. Amazon S3 deletes expired objects on your behalf. 

***You can't use a bucket policy to prevent deletions or transitions by an S3 Lifecycle rule.***

> Permanent deletion takes precedence over transition.<br>
> Transition takes precedence over creation of delete markers.

## Replication 
Enable automatic , asynchronous copying of objects across Amazon S3 buckets.
Two types of replication :
1. Live replication : To automatically replicate new and updated objects as they are written to the source bucket.
    - Same-Region Replication 
    - Cross Region Replication 
2. On-demand replication :  To replicate existing objects from the source bucket to one or more destination buckets on demand

## Policy Terminnology
- *Resource* - S3 bucket ,object, access point or job that the policy is applied to 
- *Actions* - Set of operations that are allowed usign action keywords
- *Effect* - The effect the user requests either ```Allow``` or ```Deny```
- *Principal* - The account or user who is allowed access to the action and resources in the statement
- *Condition* - Conditions for when policy is in effect 
## Bucket Policy
A bucket policy is a resource-based policy that you can use to grant access permissions to your Amazon S3 bucket and the objects in it. Only the bucket owner can associate a policy with a bucket.
Written in JSON
> Use [Policy Generator](https://awspolicygen.s3.amazonaws.com/policygen.html) to generate bucket policies

